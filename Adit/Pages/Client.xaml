<Page
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:Adit.Pages"
      xmlns:Code.Client="clr-namespace:Adit.Code.Client" xmlns:Code.Shared="clr-namespace:Adit.Code.Shared" x:Class="Adit.Pages.Client"
      mc:Ignorable="d" 
      d:DesignHeight="350" d:DesignWidth="500"
        Title="Adit Client" Background="White" Loaded="Page_Loaded">
    <Page.DataContext>
        <Code.Shared:Config/>
    </Page.DataContext>

    <Grid>
        <StackPanel>
            <Grid Margin="10,0,10,10">
                <Button x:Name="buttonMenu" HorizontalAlignment="Right" VerticalAlignment="Top" Height="25" Width="25" Margin="0,15,0,0" Background="Transparent" BorderBrush="Transparent" Click="ButtonMenu_Click">
                    <Button.ContextMenu>
                        <ContextMenu>
                            <MenuItem x:Name="menuUpgrade" Header="Upgrade to Service" Click="UpgradeToService" ToolTip="Elevates the process to a service, allowing interaction with UAC and logon windows." />
                            <MenuItem x:Name="menuUnattended" Header="Unattended Access" Click="MenuUnattended_Click" ToolTip="Installs or uninstalls a service that will allow unattended access to this computer." />
                            <MenuItem x:Name="menuUAC" Header="Handle UAC" Click="MenuUAC_Click" IsCheckable="True" IsChecked="True">
                                <MenuItem.ToolTip>
                                    <TextBlock MaxWidth="400" TextWrapping="Wrap" Text="If enabled, UAC prompts will be closed automatically if they appear.  This prevents the cursor from 'getting stuck,' since this client can't interact with UAC prompts.  To interact with UAC, install the service or do a one-time upgrade."/>
                                </MenuItem.ToolTip>
                            </MenuItem>
                        </ContextMenu>
                    </Button.ContextMenu>
                    <Image Source="/Adit;component/Assets/HamburgerMenu_16x.png"/>
                </Button>
                <StackPanel x:Name="stackMain"  HorizontalAlignment="Stretch" VerticalAlignment="Top" Visibility="Collapsed">
                    <TextBlock Text="Adit" FontWeight="Bold" FontSize="25" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,10,0,0"/>
                    <TextBlock Text="Remote access solution." FontStyle="Italic" VerticalAlignment="Top" HorizontalAlignment="Left"/>
                    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Top" Margin="0,10,0,0">
                        <TextBlock Text="Session ID:" FontSize="15"/>
                        <TextBox x:Name="textSessionID" HorizontalAlignment="Right" FontSize="15" Text="Retrieving..." TextAlignment="Center" IsReadOnly="True" Width="100" Margin="10,0,0,0" PreviewMouseLeftButtonUp="TextSessionID_PreviewMouseLeftButtonUp" Cursor="Hand" ToolTip="Click to copy the session ID into the clipboard."/>
                    </Grid>
                    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Top" Margin="0,10,0,0">
                        <Button x:Name="buttonDisconnect" HorizontalAlignment="Right" Width="100" Margin="10,0,0,0" Content="Disconnect" Height="25" Style="{DynamicResource PrimaryButton}" ToolTip="Click to copy the session ID into the clipboard." Click="ButtonDisconnect_Click"/>
                    </Grid>
                    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Top" Margin="0,10,0,0">
                        <TextBlock Text="Partner Status:" FontSize="15"/>
                        <TextBox x:Name="buttonPartnersConnected" HorizontalAlignment="Right" Height="22"  Padding="0,1,0,0" Text="0" IsReadOnly="True" Width="100" Margin="10,0,0,0" TextAlignment="Center" ToolTip="The number of partners currently connected and viewing your screen."/>
                    </Grid>
                    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Top" Margin="0,10,0,0">
                        <TextBlock Text="Files Transferred:" FontSize="15"/>
                        <TextBox x:Name="textFilesTransferred" HorizontalAlignment="Right" Height="22"  Padding="0,1,0,0" Text="0" TextAlignment="Center" IsReadOnly="True" Width="100" Margin="10,0,0,0" Cursor="Hand" PreviewMouseLeftButtonUp="TextFilesTransferred_PreviewMouseLeftButtonUp" ToolTip="Click to browse the files transferred to this computer."/>
                    </Grid>
                    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Top" Margin="0,10,0,0">
                        <TextBlock Text="Upgrade to Service:" FontSize="15"/>
                        <Button Click="UpgradeToService" Content="Upgrade" HorizontalAlignment="Right" ToolTip="Elevates the process to a service, allowing interaction with UAC and logon windows." Height="25" Width="100" Style="{DynamicResource PrimaryButton}" />
                    </Grid>
                </StackPanel>
                <StackPanel x:Name="stackConnect" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,60,0,0" Width="275" Visibility="Visible">
                    <TextBlock Text="Start a new session." FontWeight="Bold" FontSize="18" HorizontalAlignment="Center"/>
                    <TextBlock Margin="0,20,0,0"><Run Text="Host:"/></TextBlock>
                    <TextBox x:Name="textHost" Text="{Binding Current.ClientHost, Mode=TwoWay}" />
                    <TextBlock Margin="0,10,0,0"><Run Text="Port:"/></TextBlock>
                    <TextBox x:Name="textPort" Text="{Binding Current.ClientPort, Mode=TwoWay}"/>
                    <Button Height="35" Width="80" Margin="0,20,0,0" HorizontalAlignment="Right" Click="ConnectButtonClicked" IsDefault="True" Content="Connect" Style="{DynamicResource PrimaryButton}"/>
                </StackPanel>
            </Grid>
        </StackPanel>
    </Grid>
</Page>
